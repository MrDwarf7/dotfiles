{
  "agent": {
    "default_model": {
      "provider": "zed.dev",
      "model": "claude-sonnet-4"
    },
    "default_width": 700,
    "editor_model": {
      "model": "claude-3-7-sonnet-thinking-latest",
      "provider": "zed.dev"
    },
    "version": "2"
  },

  // "language_models": {
  //   "openai": {
  //     "api_url": "https://api.x.ai/v1",
  //     "available_models": [
  //       {
  //         "name": "grok-beta",
  //         "display_name": "X.ai Grok (Beta)",
  //         "max_tokens": 130000
  //       },
  //       {
  //         "name": "claude-3-7-sonnet-thinking-latest",
  //         "display_name": "Claude 3.7 Sonnet Thinking (Latest)",
  //         "max_tokens": 130000
  //       }
  //     ],
  //     "version": "1"
  //   },
  //   "zed.dev": {
  //     "available_models": [
  //       {
  //         "name": "claude-3-7-sonnet-thinking-latest",
  //         "display_name": "Claude 3.7 Sonnet Thinking (Latest)",
  //         "max_tokens": 130000,
  //         "cache_configuration": {
  //           "max_cache_anchors": 1000,
  //           "min_total_token": 1000,
  //           "should_speculate": true
  //         },
  //         "default_temperature": 0.5,
  //         "max_completion_tokens": 10000,
  //         "mode": {
  //           "type": "thinking",
  //           "budget_tokens": 100000
  //         },
  //         "provider": "anthropic"
  //       }
  //     ]
  //   }
  // },

  "lsp_highlight_debounce": 50,

  "auto_update_extensions": {
    "biome": false
  },
  "file_finder": {
    "file_icons": true
  },
  "auto_signature_help": null, // flyout when inside ( or )
  "auto_update": true,
  "current_line_highlight": "all",
  "cursor_shape": "bar",
  "diagnostics": {
    "include_warnings": true,
    "inline": {
      "enabled": true,
      "update_debounce_ms": 150,
      "padding": 4,
      "min_column": 0,
      "max_severity": null
    }
  },
  "enable_language_server": true,
  "file_scan_exclusions": ["**/target/**"],

  "git": {
    "git_gutter": "tracked_files",
    "gutter_debounce": null,
    "inline_blame": {
      "enabled": true,
      "delay_ms": 0
    },
    "hunk_style": "unstaged_hollow"
  },
  "git_panel": {
    "default_width": 320
  },
  "hide_mouse": "on_typing_and_movement",
  "icon_theme": "Material Icon Theme",
  "jsx_tag_auto_close": {
    "enabled": true
  },
  // "line_indicator_format": "short",
  // "line_indicator_format": "long",
  "message_editor": {
    "auto_replace_emoji_shortcode": true
  },

  "load_direnv": "shell_hook",
  // "pane_split_direction_vertical": "right",
  //
  "private_files": [
    //
    "**/.env*",
    "**/config/*.toml",
    "**/config/*.json",
    "**/config/*.env*",
    "**/config/*.yml",
    "**/config/*.yaml",
    "**/config/*.lock"
  ],
  "preview_tabs": {
    "enable_preview_from_code_navigation": true
  },

  // "restore_on_startup": "last_session",
  // "restore_on_startup": "last_workspace",

  "scroll_beyond_last_line": "one_page",
  "seed_search_query_from_cursor": "selection",
  "selection_highlight": true,
  // "session": {
  //   "restore_unsaved_buffers": true
  // },
  "show_signature_help_after_edits": true,

  "ssh_connections": [
    {
      "nickname": "nixbook",
      "host": "nixbook",
      "port": 22,
      "username": "dwarf",
      "upload_binary_over_ssh": true
    }
  ],

  "slash_commands": {
    "cargo_workspace": {
      "enabled": true
    }
  },

  "tab_bar": {
    "show_nav_history_buttons": false,
    "show_tab_bar_buttons": false
  },

  "tabs": {
    "activate_on_close": "history",
    "file_icons": true,
    "git_status": true,
    "show_diagnostics": "all"
  },

  "task": {
    "show_status_indicator": true
  },

  "toolbar": {
    "breadcrumbs": true,
    "quick_actions": false,
    "selections_menu": true
  },

  "unnecessary_code_fade": null,
  "use_smartcase_search": true,
  "when_closing_with_no_tabs": "platform_default",
  // "on_last_window_closed": "platform_default",

  "vim_mode": true,
  "preferred_line_length": 120,
  "show_wrap_guides": true,
  "wrap_guides": [100, 120],
  "soft_wrap": null,

  "ui_font_size": 15.0,
  "ui_font_family": "Zed Plex Mono",
  "ui_font_weight": 400.0,
  "ui_font_features": {
    "calt": false
  },

  "buffer_line_height": "standard",

  "buffer_font_size": 14.5,
  "buffer_font_family": "Zed Plex Mono",
  "buffer_font_features": {
    "calt": false,
    "clig": false,
    "liga": false,
    "zero": true
  },

  "cursor_blink": false,
  "relative_line_numbers": true,
  "terminal": {
    "default_height": 400,
    "line_height": "standard",
    "font_family": "Mononoki Nerd Font Mono",
    "font_features": {
      "calt": false,
      "clig": false,
      "liga": false,
      "zero": true
    },

    "shell": {
      "with_arguments": {
        "program": "pwsh.exe",
        "args": ["-NoLogo"]
      }
    }
  },

  "scrollbar": {
    "show": "never"
  },
  "vertical_scroll_margin": 2,
  "gutter": {
    "line_numbers": true,
    "folds": true
  },
  "theme": {
    "mode": "system",
    "light": "Tokyo Night Storm",
    "dark": "Tokyo Night Storm"
  },

  "indent_guides": {
    "enabled": true,
    "line_width": 1,
    "active_line_width": 1,
    "coloring": "indent_aware",
    "background_coloring": "disabled"
  },

  "show_edit_predictions": true,
  "features": {
    // "edit_prediction_provider": "zed"
    "edit_prediction_provider": "copilot"
  },

  "lsp": {
    "rust-analyzer": {
      "initialization_options": {
        "check": {
          "command": "clippy"
        },
        "completion": {
          "snippets": {
            "custom": {
              "Arc::new": {
                "postfix": "arc",
                "body": ["Arc::new(${receiver})"],
                "requires": "std::sync::Arc",
                "scope": "expr"
              },
              "Some": {
                "postfix": "some",
                "body": ["Some(${receiver})"],
                "scope": "expr"
              },
              "Ok": {
                "postfix": "ok",
                "body": ["Ok(${receiver})"],
                "scope": "expr"
              },
              "Rc::new": {
                "postfix": "rc",
                "body": ["Rc::new(${receiver})"],
                "requires": "std::rc::Rc",
                "scope": "expr"
              },
              "Box::pin": {
                "postfix": "boxpin",
                "body": ["Box::pin(${receiver})"],
                "requires": "std::boxed::Box",
                "scope": "expr"
              },
              "vec!": {
                "postfix": "vec",
                "body": ["vec![${receiver}]"],
                "description": "vec![]",
                "scope": "expr"
              }
            }
          }
        }
      }
    },

    "nix": {
      // "format_on_save": "on",
      "initialization_options": {
        "experimental": {
          "nix": {
            "enableNix": true,
            "enableNixFlake": true
          }
        }
      }
    }
  },

  "languages": {
    "TOML": {
      "inlay_hints": {
        "enabled": true
      }
      // "format_on_save": "on",
      // "formatter": {
      //   "external": {
      //     "command": "taplo",
      //     "arguments": ["format", "--stdin-filepath", "${buffer_path"]
      //   }
      // }
    },
    "Nix": {
      "inlay_hints": {
        "enabled": true,
        "show_other_hints": true,
        "show_type_hints": true,
        "show_parameter_hints": true
      },
      "formatter": {
        "external": {
          "command": "alejandra"
        }
      }
    }
  },

  "inlay_hints": {
    "enabled": true,
    "maxLength": null,
    "show_type_hints": true,
    "show_parameter_hints": true,
    "show_other_hints": true,
    "edit_debounce_ms": 700,
    "scroll_debounce_ms": 50
  },

  "vim": {
    "use_system_clipboard": "always",
    "use_multiline_find": true,
    "use_smartcase_find": true,
    "highlight_on_yank_duration": 60,
    "toggle_relative_line_numbers": false
  }
}
